<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Fetch commonly used site/pedon/horizon or component data from a local NASIS database. — fetchNASIS • soilDB</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Fetch commonly used site/pedon/horizon or component data from a local NASIS database. — fetchNASIS" />

<meta property="og:description" content="Fetch commonly used site/pedon/horizon data or component from a local NASIS database, return as a SoilProfileCollection object." />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">soilDB</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">2.2.4</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Fetch commonly used site/pedon/horizon or component data from a local NASIS database.</h1>
    
    <div class="hidden name"><code>fetchNASIS.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>Fetch commonly used site/pedon/horizon data or component from a local NASIS database, return as a SoilProfileCollection object.</p>
    
    </div>

    <pre class="usage"><span class='fu'>fetchNASIS</span>(<span class='kw'>from</span> <span class='kw'>=</span> <span class='st'>'pedons'</span>, <span class='no'>...</span>)

<span class='fu'>fetchNASIS_pedons</span>(<span class='kw'>SS</span><span class='kw'>=</span><span class='fl'>TRUE</span>, <span class='kw'>rmHzErrors</span><span class='kw'>=</span><span class='fl'>TRUE</span>, <span class='kw'>nullFragsAreZero</span><span class='kw'>=</span><span class='fl'>TRUE</span>,
                  <span class='kw'>soilColorState</span><span class='kw'>=</span><span class='st'>'moist'</span>, <span class='kw'>lab</span><span class='kw'>=</span><span class='fl'>FALSE</span>,
                  <span class='kw'>stringsAsFactors</span> <span class='kw'>=</span> <span class='fu'>default.stringsAsFactors</span>()
                  )
<span class='fu'>fetchNASIS_components</span>(<span class='kw'>SS</span><span class='kw'>=</span><span class='fl'>TRUE</span>, <span class='kw'>rmHzErrors</span><span class='kw'>=</span><span class='fl'>TRUE</span>, <span class='kw'>fill</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
                      <span class='kw'>stringsAsFactors</span> <span class='kw'>=</span> <span class='fu'>default.stringsAsFactors</span>()
                      )
<span class='fu'>getHzErrorsNASIS</span>(<span class='kw'>strict</span><span class='kw'>=</span><span class='fl'>TRUE</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>from</th>
      <td><p>determines what objects should fetched? ('pedons' | 'components')</p></td>
    </tr>
    <tr>
      <th>&#8230;</th>
      <td><p>arguments passed to <code>fetchNASIS_pedons()</code> or <code>fetchNASIS_components()</code></p></td>
    </tr>
    <tr>
      <th>SS</th>
      <td><p>fetch data from the currently loaded selected set in NASIS or from the entire local database (default: TRUE)</p></td>
    </tr>
    <tr>
      <th>stringsAsFactors</th>
      <td><p>logical: should character vectors be converted to factors? This argument is passed to the uncode() function. It does not convert those vectors that have been set outside of uncode() (i.e. hard coded). The 'factory-fresh' default is TRUE, but this can be changed by setting options(stringsAsFactors = FALSE)</p></td>
    </tr>
    <tr>
      <th>rmHzErrors</th>
      <td><p>should pedons with horizonation errors be removed from the results? (default: TRUE)</p></td>
    </tr>
    <tr>
      <th>nullFragsAreZero</th>
      <td><p>should fragment volumes of NULL be interpreted as 0? (default: TRUE), see details</p></td>
    </tr>
    <tr>
      <th>soilColorState</th>
      <td><p>which colors should be used to generate the convenience field 'soil_color'? ('moist' | 'dry')</p></td>
    </tr>
    <tr>
      <th>lab</th>
      <td><p>should the phlabresults child table be fetched with site/pedon/horizon data (default: FALSE)</p></td>
    </tr>
    <tr>
      <th>fill</th>
      <td><p>should missing "month" rows in the comonth table be filled with NA (FALSE)</p></td>
    </tr>
    <tr>
      <th>strict</th>
      <td><p>how strict should horizon boundaries be checked for consistency: TRUE=more | FALSE=less</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>a SoilProfileCollection class object</p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The value of <code>nullFragsAreZero</code> will have a significant impact on the rock fragment fractions returned by <code>fetchNASIS</code>. Set <code>nullFragsAreZero = FALSE</code> in those cases where there are many data-gaps and NULL rock fragment values should be interpretated as NULLs. Set <code>nullFragsAreZero = TRUE</code> in those cases where NULL rock fragment values should be interpreted as 0.</p>
<p>This function attempts to do most of the boilerplate work when extracting site/pedon/horizon or component data from a local NASIS database. Pedons that are missing horizon data, or have errors in their horizonation are excluded from the returned object, however, their IDs are printed on the console. Pedons with combination horizons (e.g. B/C) are erroneously marked as errors due to the way in which they are stored in NASIS as two overlapping horizon records.</p>
<p>See <code>getHzErrorsNASIS</code> for a simple approach to identifying pedons with problematic horizonation.</p>
<p>See the <a href='http://ncss-tech.github.io/AQP/soilDB/NASIS-component-data.html'>NASIS component tutorial</a>, and <a href='http://ncss-tech.github.io/AQP/soilDB/fetchNASIS-mini-tutorial.html'>NASIS pedon tutorial</a> for more information.</p>
    
    <h2 class="hasAnchor" id="note"><a class="anchor" href="#note"></a>Note</h2>

    <p>This function currently works only on Windows, and requires a 'nasis_local' ODBC connection.</p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><span class='co'># NOT RUN {</span>
<span class='co'># query depends on some pedon data, queried against the national database</span>
<span class='co'># note that you must setup this connection ahead of time</span>
<span class='no'>f</span> <span class='kw'>&lt;-</span> <span class='fu'>fetchNASIS</span>(<span class='kw'>from</span> <span class='kw'>=</span> <span class='st'>'pedons'</span>)

<span class='co'># plot only those profiles with densic contact</span>
<span class='fu'>plot</span>(<span class='no'>f</span>[<span class='fu'>which</span>(<span class='no'>f</span>$<span class='no'>densic.contact</span>), ], <span class='kw'>name</span><span class='kw'>=</span><span class='st'>'hzname'</span>)

<span class='co'># get basic component data from local NASIS, after performing a </span>
<span class='co'># DMU-* query against the national database</span>
<span class='no'>fc</span> <span class='kw'>&lt;-</span> <span class='fu'>fetchNASIS</span>(<span class='kw'>from</span> <span class='kw'>=</span> <span class='st'>'components'</span>)
<span class='co'># }</span></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>

      <li><a href="#note">Note</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

    <h2>Author</h2>
    D. E. Beaudette and J. M. Skovlin
  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Dylan Beaudette, Jay Skovlin, Stephen Roecker.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  

  </body>
</html>

